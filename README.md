# herokuのアップグレードに関する作業の流れ

## 1. 全体的な流れ

0. heroku config にてherokuの各種設定値を確認する
1. herokuのapplicationをメンテナンスモードにする
2. pg_dump にてバックアップを取得する
3. heroku のWeb画面からプラン変更を実施する
   - プランに応じて、変更後のDBの挙動が異なるため注意
4. pg_restore で新しいDBにバックアップDBを反映する
   - DATABASE_URL などの環境変数について手動にて対応すること
6. メンテナンスモードを戻す
7. 動作確認
8. バックアップDBを削除


## 2. `bin` について

- 一気通貫で実施は、途中で失敗した場合対応が困難になりそうなため
   まとめて実施可能な作業毎に`bin`を作成して管理しています
